@using PagedList;

@using PagedList.Mvc;


@model IEnumerable<NCMS.Models.Timesheet>

@{
    ViewBag.Title = "Timesheet";
}

<div id="app">
    <div class="sidebar app-aside" id="sidebar">
        <div class="sidebar-container perfect-scrollbar">

            <nav>

                <!-- start: MAIN NAVIGATION MENU -->
                <div class="navbar-title">
                    <span>Main Navigation</span>
                </div>
                <ul class="main-navigation-menu">

                    @if (User.Identity.IsAuthenticated)
                    {
                        if (User.IsInRole("Admin"))
                        {
                            <li>
                                <a href="~/Dashboard">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-university"></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Dashboard </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Users">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-users" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Registered Users </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Patients">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-bed" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Patients </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Appointments">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-hospital-o" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Appointments </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Prescriptions">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-medkit" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Drug Prescription </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>

                                <a href="~/Schedules">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Doctor's Schedule </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>

                                <a href="~/Timesheet">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Employees Timesheet </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        }

                        else if (User.IsInRole("Front Desk"))
                        {
                            <li>
                                <a href="~/Dashboard">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-university"></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Dashboard </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Patients">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-bed" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Patients </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Appointments">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-hospital-o" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Appointments </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>

                                <a href="~/Timesheet">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Employees Timesheet </span>
                                        </div>
                                    </div>
                                </a>
                            </li>


                        }

                        else if (User.IsInRole("Nurse"))
                        {
                            <li>
                                <a href="~/Dashboard">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-university"></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Dashboard </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Patients">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-bed" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Patients </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>
                                <a href="~/Appointments">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-hospital-o" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Appointments </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/RequestDrugs">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-bed" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Order Drugs </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Prescriptions">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-medkit" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Drug Prescription </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>

                                <a href="~/Schedules">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Doctor's Schedule </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>

                                <a href="~/Timesheet">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Employees Timesheet </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        }


                        else if (User.IsInRole("Doctor"))
                        {
                            <li>
                                <a href="~/Dashboard">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-university"></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Dashboard </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>
                                <a href="~/Appointments">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-hospital-o" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Appointments </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/History">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-bed" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Patients History </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Prescriptions">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-medkit" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Drug Prescription </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>

                                <a href="~/Schedules">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Doctor's Schedule </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>

                                <a href="~/Timesheet">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Employees Timesheet </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        }

                        else if (User.IsInRole("Pharmacist"))
                        {
                            <li>
                                <a href="~/Dashboard">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-university"></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Dashboard </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>
                                <a href="~/Appointments">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-hospital-o" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Appointments </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Prescriptions">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-medkit" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Drug Prescription </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>

                                <a href="~/Schedules">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Doctor's Schedule </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>

                                <a href="~/Timesheet">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Employees Timesheet </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        }

                        else if (User.IsInRole("Patient"))
                        {
                            <li>
                                <a href="~/Dashboard">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-university"></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Dashboard </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>
                                <a href="~/Appointments">

                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-hospital-o" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Appointments </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="~/Prescriptions">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-medkit" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Drug Prescription </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li>

                                <a href="~/Schedules">
                                    <div class="item-content">
                                        <div class="item-media">
                                            <i class="fa fa-calendar" icon></i>
                                        </div>
                                        <div class="item-inner">
                                            <span class="title"> Doctor's Schedule </span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        }
                        else
                        {
                            <h2>Error 403:</h2>
                            <p>Access Denied!</p>

                        }
                    }


                </ul>
                <!-- end: CORE FEATURES -->

            </nav>
        </div>
    </div>
    <div class="app-content">
        <!--start-wrap-->
        <header class="navbar navbar-default navbar-static-top">
            <!-- start: NAVBAR HEADER -->
            <div class="navbar-header">
                <a href="#" class="sidebar-mobile-toggler pull-left hidden-md hidden-lg" class="btn btn-navbar sidebar-toggle" data-toggle-class="app-slide-off" data-toggle-target="#app" data-toggle-click-outside="#sidebar">
                    <i class="ti-align-justify"></i>
                </a>
                <a class="navbar-brand" href="#">
                    <h2 style="padding-top:2% ">  <img src="~/Content/images/logo.png" /></h2>
                </a>
                <a href="#" class="sidebar-toggler pull-right visible-md visible-lg" data-toggle-class="app-sidebar-closed" data-toggle-target="#app">
                    <i class="ti-align-justify"></i>
                </a>
                <a class="pull-right menu-toggler visible-xs-block" id="menu-toggler" data-toggle="collapse" href=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="ti-view-grid"></i>
                </a>
            </div>
            <!-- end: NAVBAR HEADER -->
            <!-- start: NAVBAR COLLAPSE -->
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-right">
                    <!-- start: MESSAGES DROPDOWN -->
                    <li style="padding-top:2% ">
                        <h2>Novo Clinic Management System</h2>
                    </li>
                    <li class="dropdown current-user">
                        <a href class="dropdown-toggle" data-toggle="dropdown">
                            <img src="~/Content/assets/images/default-user.png" alt="user avatar"> <span class="username">

                                @using Microsoft.AspNet.Identity
                                @if (Request.IsAuthenticated)
                                {
                                    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
                                    {
                                        @Html.AntiForgeryToken()

                                        <ul class="nav navbar-nav navbar-right">
                                            <li><a href="javascript:document.getElementById('logoutForm').submit()"> <i class="fa fa-sign-out" style="font-size:20px;"></i>Log Out</a></li>
                                        </ul>
                                    }
                                }



                            </span>
                        </a>

                    </li>

                    <!-- end: USER OPTIONS DROPDOWN -->
                </ul>
                <!-- end: USER OPTIONS DROPDOWN -->
                </ul>
                <!-- start: MENU TOGGLER FOR MOBILE DEVICES -->
                <div class="close-handle visible-xs-block menu-toggler" data-toggle="collapse" href=".navbar-collapse">
                    <div class="arrow-left"></div>
                    <div class="arrow-right"></div>
                </div>
                <!-- end: MENU TOGGLER FOR MOBILE DEVICES -->
            </div>


            <!-- end: NAVBAR COLLAPSE -->
        </header>
        <div class="main-content">
            <div class="wrap-content container" id="container">
                <!-- start: PAGE TITLE -->
                <section id="page-title">
                    <div class="row">
                        <div class="col-sm-8">
                            <h1 class="mainTitle">Employees Timesheet</h1>
                        </div>
                        <ol class="breadcrumb">
                            <li>
                                @Html.ActionLink("WELCOME  " + User.Identity.GetUserName() + " !", "Index", "Manage", routeValues: null, htmlAttributes: new { title = "Manage" })
                            </li>
                        </ol>
                    </div>
                    @{

                        var CurrentUser = User.Identity.GetUserName();

                    }
                </section>
                @if (User.Identity.IsAuthenticated)
                {
                    if (User.IsInRole("Front Desk") || User.IsInRole("Nurse") || User.IsInRole("Pharmacist") || User.IsInRole("Doctor"))
                    {

                        <table class="table table-bordered">
                            
                                <div class="col-md-6">
                                    <button type="submit" class='btn btn-primary'><i class="fa fa-plus fa-lg"><a href="~/Timesheet/Create"><font color="white"> Clock In</font></a></i></button>
                                </div>
                          
                            <div class="col-md-3"></div>
                            <div class="col-md-3">
                                @*Html.BeginForm is used to add a form in an Html document * @@ * Pass the action name in the first parameter, controller name in the second parameter and specify the form request type as get*@
                                @using (Html.BeginForm("Index", "Timesheet", FormMethod.Get))
                                {
                                    //the following are search options
                                    <div class="form-group">

                                        
                                        <div class="col-md-4">
                                            <br />
                                           
                                            <input class="form-control text-box single-line" id="Email" name="search" type="hidden" value="@CurrentUser" />
                                            <br /><br />
                                        </div>
                                    </div><br />
                                }
                            </div>
                            <thead class="table-heading">
                                <tr>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().Id)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().Email)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().TimeIn)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().TimeOut)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().DateCreated)
                                            </font>
                                        </b>
                                    </td>

                                    <td>
                                        <b>
                                            <font size="4">
                                                Actions
                                            </font>
                                        </b>
                                    </td>
                                </tr>
                            </thead>
                            @if (Model.Count() == 0)
                            {
                                <tr>
                                    <td colspan="12"> Records not found </td>
                                </tr>
                            }
                            else
                            {

                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Id)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Email)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TimeIn)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TimeOut)
                                        </td>

                                        <td>
                                            @Html.DisplayFor(modelItem => item.DateCreated)
                                        </td>
                                        <td>
                                            <button type="submit" class='btn btn-primary'><i class="fa fa-plus fa-lg"><a href="~/Timesheet/Edit/@item.Id"><font color="white"> Clock Out</font></a></i></button>

                                        </td>
                                    </tr>
                                }
                            }

                        </table>

                    }
                    else if (User.IsInRole("Admin"))
                    {
                        <table class="table table-bordered">
                            <div class="col-md-6">



                                <button type="submit" class='btn btn-primary'><i class="fa fa-plus fa-lg"><a href="~/Timesheet/Create"><font color="white"> Clock In</font></a></i></button>
                            </div>
                            <div class="col-md-3"></div>
                            <div class="col-md-3">
                                @*Html.BeginForm is used to add a form in an Html document * @@ * Pass the action name in the first parameter, controller name in the second parameter and specify the form request type as get*@
                                @using (Html.BeginForm("Index", "Timesheet", FormMethod.Get))
                                {
                                    //the following are search options
                                    <div class="form-group">

                                        Email:
                                        @Html.TextBox("search")
                                        <div class="col-md-4">
                                            <br />
                                            <input type="submit" name="submit" value="Search" class="btn btn-primary" />
                                            <br /><br />
                                        </div>
                                    </div><br />
                                }
                            </div>
                            <thead class="table-heading">
                                <tr>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().Id)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().Email)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().TimeIn)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().TimeOut)
                                            </font>
                                        </b>
                                    </td>
                                    <td>
                                        <b>
                                            <font size="4">
                                                @Html.DisplayNameFor(model => model.First().DateCreated)
                                            </font>
                                        </b>
                                    </td>

                                    <td>
                                        <b>
                                            <font size="4">
                                                Actions
                                            </font>
                                        </b>
                                    </td>
                                </tr>
                            </thead>

                            @if (Model.Count() == 0)
                            {
                                <tr>
                                    <td colspan="12"> Records not found </td>
                                </tr>
                            }
                            else
                            {

                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Id)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Email)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TimeIn)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TimeOut)
                                        </td>

                                        <td>
                                            @Html.DisplayFor(modelItem => item.DateCreated)
                                        </td>
                                        <td>

                                           
                                            <button type="submit" class='btn btn-primary'><i class="fa fa-plus fa-lg"><a href="~/Timesheet/Edit/@item.Id"><font color="white"> Clock Out</font></a></i></button>

                                        </td>
                                    </tr>
                                }
                            }

                        </table>
                                   
                                

                       
                    }
                    else
                    {
                        <h2>Error 403:</h2>
                        <p>Access Denied!</p>

                    }
                }
                else
                {
                    <h2>Access Denied!</h2>


                }
            </div><div></div>
        </div><div></div>
    </div><div></div>
